<!DOCTYPE html>
<html lang="en" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Book page</title>
</head>
<body>
<p th:text="${'Name: ' + book.getName()}">Name</p>
<p th:text="${'Author: ' + book.getAuthor()}">Author</p>
<p th:text="${'Year: ' + book.getYear()}">Year</p>

<!-- Если книга никому не принадлежит, данный текст не показывается -->
<p th:if="${user}!=null" th:text="${'Library user: ' + user.getFullName()}">User</p>

<!--Используем форму, так как отправляем запрос при нажатии на элемент списка, а именно
назначение владельца книги (указываем метод и действие)-->
<form th:if="${user}==null" th:method="POST" th:action="@{/book/{id}(id=${book.getId()})}">
    <!--Название для списка, которое присваиваем по id для списка-->
    <!--Условие, которые проверяет, есть ли пользователи библиотеки-->
    <label th:if="${!(people.isEmpty())}" for="people">Users list</label>
    <!--Object это то, из чего состоит наш список, object должны также передавать с помощью model -->
    <!--В данном случае, в object передали пустой объект класса Person-->
    <!--Field это то поле, которое мы будем выбирать в нашем списке, которое будет лежать в аттрибуте Value-->
    <select th:if="${!(people.isEmpty())}" th:object="${person}" th:filed="*{id}" id="people">
        <!--Обход по списку книг благодаря each-->
        <!--Отправляем на сервер Value, которое получаем у каждого объекта-->
        <option th:if="${!(people.isEmpty())}" th:each="person : ${people}" th:value="${person.getId()}"
                th:text="${person.getFullName()}">
            <!--Текст, который будет в нашем списке-->
        </option>
    </select>
    <!--Кнопка выбора-->
    <input th:if="${!(people.isEmpty())}" type="submit" value="Choose user"/>
</form>

</body>
</html>